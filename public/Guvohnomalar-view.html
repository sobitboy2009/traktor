<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Guvohnomani tekshirish</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-header bg-success text-white">
            <h4 class="mb-0">Guvohnoma haqiqiyligini tekshirish</h4>
        </div>
        <div class="card-body" id="result">
            <p class="text-muted">Ma'lumotlar yuklanmoqda...</p>
        </div>
    </div>
</div>

<script>
const API_URL = 'http://localhost:8080/api';

const params = new URLSearchParams(window.location.search);
const certNumber = params.get('cert');

if (!certNumber) {
    document.getElementById('result').innerHTML =
        '<div class="alert alert-danger">Guvohnoma raqami topilmadi</div>';
} else {
    fetch(`${API_URL}/documents/by-cert/${certNumber}`)
        .then(r => r.json())
        .then(doc => {
            document.getElementById('result').innerHTML = `
                <h5 class="fw-bold text-uppercase">${doc.student_name}</h5>

<p><b>JShShIR:</b> ${doc.student_jshshir}</p>
<p><b>Guvohnoma raqami:</b> ${doc.certificate_number}</p>
<p><b>Imtihon sanasi:</b> ${doc.exam_date}</p>
<p><b>Toifalar:</b> ${doc.categories}</p>
<p><b>Kurs davomiyligi:</b> ${doc.course_hours} soat</p>

<hr>

<p><b>Y.H.Q va H.X.Q:</b> ${doc.grade_safety}</p>
<p><b>Traktor tuzilishi:</b> ${doc.grade_structure}</p>

<span class="badge bg-success">Guvohnoma haqiqiy</span>

            `;
        })
        .catch(() => {
            document.getElementById('result').innerHTML =
                '<div class="alert alert-danger">Guvohnoma topilmadi</div>';
        });
}
</script>

</body>
</html>
